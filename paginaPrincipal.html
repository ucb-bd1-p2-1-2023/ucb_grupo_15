<!DOCTYPE html>
<html>
<head>
    <title>Calculadora de distancia con Google Maps</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBkeIuW3s504gN8C1Tl5Bqy3ML6ly_rEpc"></script>
    <script>
    var map;
    var marcadorOrigen;
    var marcadorDestino;
    
    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: -17.372377, lng: -66.143508}, // Centro del mapa inicial
            zoom: 15 // Nivel de zoom inicial
        });
    
        marcadorOrigen = new google.maps.Marker({
            map: map,
            draggable: true, // Permite arrastrar el marcador
            title: 'Origen'
        });
    
        marcadorDestino = new google.maps.Marker({
            map: map,
            draggable: true, // Permite arrastrar el marcador
            title: 'Destino'
        });
    
        google.maps.event.addListener(map, 'click', function(event) {
            establecerMarcadorOrigen(event.latLng);
        });

        google.maps.event.addListener(map, 'center_changed', function() {
            marcadorOrigen.setPosition(map.getCenter());
            calcularDistancia();
        });
    }
    
    function establecerMarcadorOrigen(location) {
        marcadorOrigen.setPosition(location);
        calcularDistancia();
    }
    
    function establecerMarcadorDestino(location) {
        marcadorDestino.setPosition(location);
        calcularDistancia();
    }
    
    function calcularDistancia() {
        var origen = marcadorOrigen.getPosition();
        var destino = marcadorDestino.getPosition();
    
        var directionsService = new google.maps.DirectionsService();
    
        var request = {
            origin: origen,
            destination: destino,
            travelMode: google.maps.TravelMode.DRIVING
        };
    
        directionsService.route(request, function(response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                var distancia = response.routes[0].legs[0].distance.text;
                var duracion = response.routes[0].legs[0].duration.text;
    
                document.getElementById('resultado').innerHTML = 'Distancia: ' + distancia + '<br>Duraci√≥n: ' + duracion;
            } else {
                document.getElementById('resultado').innerHTML = 'Error al calcular la distancia.';
            }
        });
    }
    </script>
    <style>
    #map {
        height: 600px;
        width: 100%;
    }
    </style>
</head>
<body>
    <h1>Calculadora de distancia con Google Maps</h1>
    <div id="map"></div>
    <br>
    <button onclick="establecerMarcadorOrigen(map.getCenter())">Origen</button>
    <button onclick="establecerMarcadorDestino(map.getCenter())">Destino</button>
    <br>
    <div id="resultado"></div>

    <script>
        window.onload = function() {
        initMap();
        }
    </script>
</body>
</html>
